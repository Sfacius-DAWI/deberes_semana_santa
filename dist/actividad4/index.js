const c=({tipo:e,clase:t=null,id:o=null,texto:n=null,padre:a=null,NumberId:r=null,AddElemento:i=null})=>{const s=document.createElement(e);return t&&s.classList.add(t),o&&(s.id=o),r&&(s.dataset.numberId=r),n&&(s.textContent=n),a&&a.append(s),i&&s.append(i),s};async function l(){const e=new AbortController,t=setTimeout(()=>e.abort(),1e4);try{const o=await fetch("https://jsonplaceholder.typicode.com/users",{signal:e.signal});if(clearTimeout(t),!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw o.name==="AbortError"?console.error("La petici贸n tard贸 demasiado y fue cancelada."):console.error("Fetch failed:",o),o}}const d=async(e=null)=>await(await fetch(`https://jsonplaceholder.typicode.com/users/${e}/posts`)).json(),p=async(e=null)=>await(await fetch(`https://jsonplaceholder.typicode.com/posts/${e}/comments`)).json(),u=async e=>{const t=await p(e);console.log("comentarios de la publicaci贸n:",t);const o=c({tipo:"div"});return t.forEach(n=>{const a=c({tipo:"div",clase:"comentario",padre:o});a.style.textAlign="left",a.append(n.name)}),o},m=async e=>{const t=await d(e);console.log("Posts del usuario:",t);const o=c({tipo:"ol"});return t.forEach(n=>{const a=c({tipo:"li",padre:o}),r=c({tipo:"div",clase:"publicacion",texto:n.title,padre:a}),i=c({tipo:"div",padre:a});r.addEventListener("click",async function(){if(i.innerHTML)i.innerHTML="";else{const s=await u(n.id);i.appendChild(s)}})}),o},h=async()=>{try{const e=document.getElementById("usuarios"),t=document.getElementById("publicaciones");if(!e)throw new Error("No se encontr贸 el elemento con id usuarios");const o=await l();return o.forEach(n=>{const a=c({tipo:"div",clase:"usuario",id:`user-${n.id}`,NumberId:n.id,padre:e});a.style.cursor="pointer",a.innerHTML=`
        <h3>${n.name}</h3>
        <p>Email: ${n.email}</p>
        <p>Ciudad: ${n.address.city}</p>
        <p>Empresa: ${n.company.name}</p>
      `,a.addEventListener("click",async()=>{document.querySelectorAll(".usuario").forEach(r=>r.classList.remove("seleccionado")),a.classList.add("seleccionado"),await y(n,t)})}),o.map(n=>n.name)}catch(e){throw console.error("Error en cargarNombres:",e),e}},y=async(e,t)=>{t.innerHTML=`<h2>Publicaciones de ${e.name}</h2>`;const o=await m(e.id);t.appendChild(o)};function f(){const e="/assets/actividad4-Buexe2J8.css",t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}document.addEventListener("DOMContentLoaded",async()=>{try{f(),await h()}catch(e){console.error("Error al cargar los datos:",e)}});
