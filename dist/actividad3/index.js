const s=()=>[{id:1,nombre:"Spaghetti Carbonara",categoria:"pasta",ingredientes:["Spaghetti","Panceta","Huevos","Queso Parmesano","Pimienta negra","Ajo"],precio:14.5,descripcion:"Cremosa pasta con panceta crujiente, huevo y queso parmesano. Receta tradicional romana."},{id:2,nombre:"Fettuccine Alfredo",categoria:"pasta",ingredientes:["Fettuccine","Mantequilla","Queso Parmesano","Nata","Ajo","Perejil"],precio:13.9,descripcion:"Pasta plana en salsa cremosa de mantequilla y parmesano. Un clÃ¡sico italiano irresistible."},{id:3,nombre:"Lasagna Bolognese",categoria:"pasta",ingredientes:["Pasta de lasaÃ±a","Carne de res","Tomate","Bechamel","Mozzarella","Parmesano"],precio:16.2,descripcion:"Capas de pasta con ragÃº bolognese, bechamel y quesos gratinados. Horneada a la perfecciÃ³n."},{id:4,nombre:"Pizza Margherita",categoria:"pizza",ingredientes:["Masa artesanal","Salsa de tomate","Mozzarella fresca","Albahaca","Aceite de oliva"],precio:12.8,descripcion:"La pizza mÃ¡s tradicional con tomate, mozzarella fresca y albahaca. Simplicidad italiana perfecta."},{id:5,nombre:"Pizza Quattro Stagioni",categoria:"pizza",ingredientes:["Masa artesanal","Tomate","Mozzarella","JamÃ³n","ChampiÃ±ones","Alcachofas","Aceitunas"],precio:15.9,descripcion:"Pizza dividida en cuatro secciones representando las estaciones del aÃ±o. Sabores Ãºnicos en cada cuarto."},{id:6,nombre:"Pizza Prosciutto e Funghi",categoria:"pizza",ingredientes:["Masa artesanal","Tomate","Mozzarella","Prosciutto di Parma","ChampiÃ±ones frescos"],precio:17.5,descripcion:"Exquisita combinaciÃ³n de prosciutto di Parma y champiÃ±ones frescos sobre base tradicional."},{id:7,nombre:"Tiramisu",categoria:"postre",ingredientes:["Bizcochos de soletilla","CafÃ© espresso","Mascarpone","Huevos","AzÃºcar","Cacao"],precio:6.9,descripcion:"El postre italiano mÃ¡s famoso. Capas de cafÃ©, mascarpone y cacao en perfecta armonÃ­a."},{id:8,nombre:"Panna Cotta",categoria:"postre",ingredientes:["Nata","AzÃºcar","Gelatina","Vainilla","Coulis de frutos rojos"],precio:5.5,descripcion:"Delicada crema gelificada con vainilla y coulis de frutos rojos. Textura sedosa irresistible."},{id:9,nombre:"Cannoli Siciliani",categoria:"postre",ingredientes:["Masa crujiente","Ricotta","AzÃºcar glass","Pistachos","Chocolate","Frutas confitadas"],precio:7.2,descripcion:"Tubos crujientes rellenos de ricotta dulce con pistachos y chocolate. Especialidad siciliana autÃ©ntica."}],r="https://foodish-api.com",c={async obtenerPorCategoria(a){const i={pasta:"/api/images/pasta",pizza:"/api/images/pizza",postre:"/api/images/dessert"}[a];if(!i)return console.warn(`CategorÃ­a ${a} no soportada, usando imagen por defecto`),this.obtenerImagenPorDefecto(a);try{const o=await fetch(`${r}${i}`);if(!o.ok)throw new Error(`Error en la API: ${o.status}`);return{url:(await o.json()).image,alt:`Imagen de ${a}`,categoria:a}}catch(o){return console.error(`Error al obtener imagen de ${a}:`,o),this.obtenerImagenPorDefecto(a)}},async obtenerImagenAleatoria(){try{const a=await fetch(`${r}/api/`);if(!a.ok)throw new Error(`Error en la API: ${a.status}`);return{url:(await a.json()).image,alt:"Imagen de comida aleatoria",categoria:"general"}}catch(a){return console.error("Error al obtener imagen aleatoria:",a),this.obtenerImagenPorDefecto("general")}},obtenerImagenPorDefecto(a){const e={pasta:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1MCIgdmlld0JveD0iMCAwIDQwMCAyNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjUwIiBmaWxsPSIjZTc0YzNjIi8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+8J+NnSBQQVNUQTwvdGV4dD4KPC9zdmc+",alt:"Imagen por defecto de pasta"},pizza:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1MCIgdmlld0JveD0iMCAwIDQwMCAyNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjUwIiBmaWxsPSIjZjM5YzEyIi8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+8J+NlSBQSVpaQTwvdGV4dD4KPC9zdmc+",alt:"Imagen por defecto de pizza"},postre:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1MCIgdmlld0JveD0iMCAwIDQwMCAyNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjUwIiBmaWxsPSIjOWI1OWI2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+8J+NsCBQT1NURUU8L3RleHQ+Cjwvc3ZnPg==",alt:"Imagen por defecto de postre"},general:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1MCIgdmlld0JveD0iMCAwIDQwMCAyNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjUwIiBmaWxsPSIjMzQ0OTVlIi8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+8J+NvO+4jyBDT01JREE8L3RleHQ+Cjwvc3ZnPg==",alt:"Imagen por defecto de comida"}};return{...e[a]||e.general,categoria:a}},async precargarImagenes(a){const e=a.map(i=>this.obtenerPorCategoria(i));try{return(await Promise.allSettled(e)).map((o,t)=>({categoria:a[t],imagen:o.status==="fulfilled"?o.value:this.obtenerImagenPorDefecto(a[t])}))}catch(i){return console.error("Error al precargar imÃ¡genes:",i),a.map(o=>({categoria:o,imagen:this.obtenerImagenPorDefecto(o)}))}}},n={mostrar(a,e){e.innerHTML="";const i=document.createElement("div");i.className="menu-grid",a.forEach(o=>{const t=this.crearTarjetaProducto(o);i.appendChild(t)}),e.appendChild(i)},mostrarFiltrados(a,e){this.mostrar(a,e)},crearTarjetaProducto(a){const e=document.createElement("div");return e.className="producto-card",e.dataset.categoria=a.categoria,e.innerHTML=`
            <div class="producto-imagen">
                <img src="${a.imagen.url}" alt="${a.imagen.alt}" loading="lazy">
                <div class="categoria-badge ${a.categoria}">
                    ${this.obtenerIconoCategoria(a.categoria)} ${this.obtenerNombreCategoria(a.categoria)}
                </div>
            </div>
            
            <div class="producto-contenido">
                <h3 class="producto-nombre">${a.nombre}</h3>
                <p class="producto-descripcion">${a.descripcion}</p>
                
                <div class="producto-ingredientes">
                    <h4>Ingredientes:</h4>
                    <div class="ingredientes-lista">
                        ${a.ingredientes.map(o=>`<span class="ingrediente-tag">${o}</span>`).join("")}
                    </div>
                </div>
                
                <div class="producto-footer">
                    <span class="producto-precio">â‚¬${a.precio.toFixed(2)}</span>
                    <button class="btn-agregar" data-id="${a.id}">
                        ğŸ›’ Agregar
                    </button>
                </div>
            </div>
        `,e.querySelector(".btn-agregar").addEventListener("click",()=>{this.agregarAlCarrito(a)}),e},obtenerIconoCategoria(a){return{pasta:"ğŸ",pizza:"ğŸ•",postre:"ğŸ°"}[a]||"ğŸ½ï¸"},obtenerNombreCategoria(a){return{pasta:"Pasta",pizza:"Pizza",postre:"Postre"}[a]||a},agregarAlCarrito(a){this.mostrarNotificacion(`${a.nombre} agregado al carrito`),console.log("Producto agregado al carrito:",a)},mostrarNotificacion(a){const e=document.createElement("div");e.className="notificacion-carrito",e.innerHTML=`
            <span class="notificacion-icon">âœ…</span>
            <span class="notificacion-texto">${a}</span>
        `,document.body.appendChild(e),setTimeout(()=>{e.classList.add("mostrar")},100),setTimeout(()=>{e.classList.remove("mostrar"),setTimeout(()=>{e.parentNode&&e.remove()},300)},3e3)}},d={mostrarError(a){const e=document.getElementById("menu-container");if(!e)return;e.innerHTML=`
            <div class="error-menu-container">
                <div class="error-menu-icon">ğŸ½ï¸ğŸ’”</div>
                <h3>Â¡Ups! Problema en la cocina</h3>
                <p>${a}</p>
                <p class="error-menu-subtitle">Nuestro chef estÃ¡ trabajando para solucionarlo. Por favor, intenta de nuevo.</p>
                <button id="reintentar-menu" class="btn-reintentar-menu">ğŸ”„ Reintentar</button>
            </div>
        `;const i=document.getElementById("reintentar-menu");i&&i.addEventListener("click",()=>{window.location.reload()})},mostrarAdvertencia(a){const e=document.createElement("div");e.className="advertencia-menu",e.innerHTML=`
            <span class="advertencia-menu-icon">âš ï¸</span>
            <span class="advertencia-menu-texto">${a}</span>
            <button class="advertencia-menu-cerrar">&times;</button>
        `,document.body.insertBefore(e,document.body.firstChild),e.querySelector(".advertencia-menu-cerrar").addEventListener("click",()=>{e.remove()}),setTimeout(()=>{e.parentNode&&e.remove()},4e3)},mostrarErrorImagen(a,e){const i=this.obtenerImagenPorDefecto(e);a.src=i.url,a.alt=i.alt},obtenerImagenPorDefecto(a){const e={pasta:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1MCIgdmlld0JveD0iMCAwIDQwMCAyNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjUwIiBmaWxsPSIjZTc0YzNjIi8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+8J+NnSBQQVNUQTwvdGV4dD4KPC9zdmc+",alt:"Imagen por defecto de pasta"},pizza:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1MCIgdmlld0JveD0iMCAwIDQwMCAyNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjUwIiBmaWxsPSIjZjM5YzEyIi8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+8J+NlSBQSVpaQTwvdGV4dD4KPC9zdmc+",alt:"Imagen por defecto de pizza"},postre:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1MCIgdmlld0JveD0iMCAwIDQwMCAyNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjUwIiBmaWxsPSIjOWI1OWI2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+8J+NsCBQT1NURUU8L3RleHQ+Cjwvc3ZnPg==",alt:"Imagen por defecto de postre"},general:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1MCIgdmlld0JveD0iMCAwIDQwMCAyNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjUwIiBmaWxsPSIjMzQ0OTVlIi8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+8J+NvO+4jyBDT01JREE8L3RleHQ+Cjwvc3ZnPg==",alt:"Imagen por defecto de comida"}};return e[a]||e.general}};class l{constructor(){this.contenedorMenu=document.getElementById("menu-container"),this.botonCargarMenu=document.getElementById("cargar-menu"),this.filtros=document.querySelectorAll(".filtro-categoria"),this.categoriaActiva="todos",this.productos=[],this.inicializar()}inicializar(){this.botonCargarMenu.addEventListener("click",()=>this.cargarMenu()),this.configurarFiltros(),this.cargarMenu()}configurarFiltros(){this.filtros.forEach(e=>{e.addEventListener("click",i=>{this.filtros.forEach(o=>o.classList.remove("activo")),i.target.classList.add("activo"),this.categoriaActiva=i.target.dataset.categoria,this.filtrarProductos()})})}async cargarMenu(){this.mostrarCargando();try{const e=s(),i=await this.asignarImagenes(e);this.productos=i,n.mostrar(this.productos,this.contenedorMenu),this.botonCargarMenu.style.display="none"}catch(e){d.mostrarError("Error al cargar el menÃº del restaurante."),console.error("Error:",e)}}async asignarImagenes(e){const i=[];for(const o of e)try{const t=await c.obtenerPorCategoria(o.categoria);i.push({...o,imagen:t})}catch(t){console.warn(`Error al obtener imagen para ${o.nombre}:`,t),i.push({...o,imagen:{url:"https://via.placeholder.com/300x200/f39c12/ffffff?text=ğŸ½ï¸",alt:`Imagen de ${o.nombre}`}})}return i}filtrarProductos(){if(!this.productos.length)return;const e=this.categoriaActiva==="todos"?this.productos:this.productos.filter(i=>i.categoria===this.categoriaActiva);n.mostrarFiltrados(e,this.contenedorMenu)}mostrarCargando(){this.contenedorMenu.innerHTML=`
            <div class="loading-menu">
                <div class="loading-chef">ğŸ‘¨â€ğŸ³</div>
                <p>Preparando el menÃº...</p>
                <p class="loading-subtitle">Nuestro chef estÃ¡ seleccionando los mejores platos</p>
                <div class="loading-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        `}}document.addEventListener("DOMContentLoaded",()=>{new l});
